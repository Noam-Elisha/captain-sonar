<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>Engineer – Admiral Radar</title>
  <link rel="stylesheet" href="/static/css/base.css"/>
  <link rel="stylesheet" href="/static/css/engineer.css"/>
</head>
<body class="role-engineer team-{{ team }}">
<div id="result-toast" class="result-toast hidden"></div>

<div class="app-layout">
  <div class="ctrl-panel full-width">
    <div class="role-header team-{{ team }}">
      <span class="role-title">⚡ ENGINEER</span>
      <span class="team-badge">{{ team | upper }} TEAM</span>
    </div>

    <!-- Health -->
    <div class="panel-section two-col">
      <div>
        <div class="section-label">OWN HULL</div>
        <div class="health-row" id="own-health"></div>
      </div>
      <div>
        <div class="section-label">ENEMY HULL</div>
        <div class="health-row" id="enemy-health"></div>
      </div>
    </div>

    <div class="section-label status-label" id="eng-status">
      Waiting for captain to move…
    </div>

    <!-- Power Grid: 2×2 section layout (W/N top row, S/E bottom row) -->
    <div class="eng-board" id="eng-board">

      <!-- SVG overlay for inter-section circuit loops -->
      <svg class="eng-circuit-svg" id="eng-circuit-svg" xmlns="http://www.w3.org/2000/svg"></svg>

      <!-- ── WEST section (top-left) ────────────────────────── -->
      <div class="eng-section west-section" id="section-west">
        <div class="section-dir-label">← WEST</div>
        <div class="section-main-nodes">
          <div class="eng-node red circuit-1"   id="node-west-0" data-dir="west" data-idx="0"><span class="circuit-badge c1">C1</span></div>
          <div class="eng-node green circuit-2"  id="node-west-1" data-dir="west" data-idx="1"><span class="circuit-badge c2">C2</span></div>
          <div class="eng-node yellow circuit-3" id="node-west-2" data-dir="west" data-idx="2"><span class="circuit-badge c3">C3</span></div>
        </div>
        <div class="section-divider"><span>⚛</span></div>
        <div class="section-extra-nodes">
          <div class="eng-node yellow no-circuit"    id="node-west-3" data-dir="west" data-idx="3"></div>
          <div class="eng-node red no-circuit"       id="node-west-4" data-dir="west" data-idx="4"></div>
          <div class="eng-node radiation no-circuit" id="node-west-5" data-dir="west" data-idx="5"><span class="rad-sym">☢</span></div>
        </div>
      </div>

      <!-- ── NORTH section (top-right) ─────────────────────── -->
      <div class="eng-section north-section" id="section-north">
        <div class="section-dir-label">↑ NORTH</div>
        <div class="section-main-nodes">
          <div class="eng-node yellow circuit-1" id="node-north-0" data-dir="north" data-idx="0"><span class="circuit-badge c1">C1</span></div>
          <div class="eng-node red circuit-2"    id="node-north-1" data-dir="north" data-idx="1"><span class="circuit-badge c2">C2</span></div>
          <div class="eng-node yellow circuit-3" id="node-north-2" data-dir="north" data-idx="2"><span class="circuit-badge c3">C3</span></div>
        </div>
        <div class="section-divider"><span>⚛</span></div>
        <div class="section-extra-nodes">
          <div class="eng-node red no-circuit"       id="node-north-3" data-dir="north" data-idx="3"></div>
          <div class="eng-node green no-circuit"     id="node-north-4" data-dir="north" data-idx="4"></div>
          <div class="eng-node radiation no-circuit" id="node-north-5" data-dir="north" data-idx="5"><span class="rad-sym">☢</span></div>
        </div>
      </div>

      <!-- ── SOUTH section (bottom-left) ───────────────────── -->
      <div class="eng-section south-section" id="section-south">
        <div class="section-dir-label">↓ SOUTH</div>
        <div class="section-main-nodes">
          <div class="eng-node green circuit-1"  id="node-south-0" data-dir="south" data-idx="0"><span class="circuit-badge c1">C1</span></div>
          <div class="eng-node yellow circuit-2" id="node-south-1" data-dir="south" data-idx="1"><span class="circuit-badge c2">C2</span></div>
          <div class="eng-node red circuit-3"    id="node-south-2" data-dir="south" data-idx="2"><span class="circuit-badge c3">C3</span></div>
        </div>
        <div class="section-divider"><span>⚛</span></div>
        <div class="section-extra-nodes">
          <div class="eng-node green no-circuit"     id="node-south-3" data-dir="south" data-idx="3"></div>
          <div class="eng-node yellow no-circuit"    id="node-south-4" data-dir="south" data-idx="4"></div>
          <div class="eng-node radiation no-circuit" id="node-south-5" data-dir="south" data-idx="5"><span class="rad-sym">☢</span></div>
        </div>
      </div>

      <!-- ── EAST section (bottom-right) ───────────────────── -->
      <div class="eng-section east-section" id="section-east">
        <div class="section-dir-label">EAST →</div>
        <div class="section-main-nodes">
          <div class="eng-node yellow circuit-1" id="node-east-0" data-dir="east" data-idx="0"><span class="circuit-badge c1">C1</span></div>
          <div class="eng-node red circuit-2"    id="node-east-1" data-dir="east" data-idx="1"><span class="circuit-badge c2">C2</span></div>
          <div class="eng-node green circuit-3"  id="node-east-2" data-dir="east" data-idx="2"><span class="circuit-badge c3">C3</span></div>
        </div>
        <div class="section-divider"><span>⚛</span></div>
        <div class="section-extra-nodes">
          <div class="eng-node yellow no-circuit"    id="node-east-3" data-dir="east" data-idx="3"></div>
          <div class="eng-node red no-circuit"       id="node-east-4" data-dir="east" data-idx="4"></div>
          <div class="eng-node radiation no-circuit" id="node-east-5" data-dir="east" data-idx="5"><span class="rad-sym">☢</span></div>
        </div>
      </div>

    </div><!-- /.eng-board -->

    <div class="legend">
      <span class="dot yellow"></span>Stealth
      <span class="dot red"></span>Torpedo/Mine
      <span class="dot green"></span>Sonar/Drone
      <span class="dot radiation">☢</span>Radiation
    </div>

    <!-- Comms quick actions -->
    <div class="comms-buttons" id="comms-buttons">
      <button class="comms-btn" onclick="sendComms('recommend_directions')">Recommend Directions</button>
    </div>

    <div class="panel-section">
      <div class="section-label">COMMS LOG</div>
      <div class="event-log" id="event-log"></div>
    </div>
  </div>
</div>

<script>
  const GAME_ID = "{{ game_id }}";
  const MY_NAME = "{{ player_name }}";
  const MY_TEAM = "{{ team }}";
</script>
<script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
<script src="/static/js/engineer.js"></script>
</body>
</html>
