/* ── Engineer styles ── */

.status-label {
  padding: .5rem 1rem;
  color: var(--accent);
  font-size: .85rem;
  font-style: italic;
}

/* ═══════════════════════════════════════════════════════════
   Engineering board: 4 direction columns × 6 node rows
   Circuit lines drawn as SVG overlay connecting nodes
   ═══════════════════════════════════════════════════════════ */

/* Outer wrapper: positions relative so SVG can overlay */
.eng-wrap {
  position: relative;
  display: inline-block;   /* shrink-wrap to content */
  margin: 0 auto;
  padding: .5rem 1.25rem 1rem;
  user-select: none;
}

/* SVG circuit lines overlay */
.circuit-svg {
  position: absolute;
  top: 0; left: 0;
  pointer-events: none;
  z-index: 0;
  overflow: visible;
}

/* ── Direction column headers ─────────────────────────────── */
.eng-col-headers {
  display: flex;
  gap: 20px;
  justify-content: center;
  margin-bottom: .5rem;
}

.eng-dir-header {
  width: 52px;
  text-align: center;
  font-size: .78rem;
  font-weight: 700;
  letter-spacing: .05em;
  color: var(--text-muted);
  text-transform: uppercase;
  padding: .25rem 0;
  border-radius: 6px;
  transition: color .2s, background .2s;
}
.eng-dir-header.active {
  color: var(--accent);
  background: rgba(6,182,212,.12);
}

/* ── Columns container ────────────────────────────────────── */
.eng-cols {
  display: flex;
  gap: 20px;             /* space between W / N / S / E columns */
  justify-content: center;
  align-items: flex-start;
  position: relative;
  z-index: 1;
}

/* Each direction column */
.eng-col {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 7px;
  position: relative;
  padding: 4px 6px;
  border-radius: 10px;
  transition: background .2s;
}
.eng-col.active-col {
  background: rgba(6,182,212,.07);
  outline: 1.5px solid rgba(6,182,212,.25);
}

/* Reactor divider inside each column (between index 2 and 3) */
.reactor-divider-inline {
  width: 100%;
  text-align: center;
  font-size: .55rem;
  letter-spacing: .06em;
  color: var(--text-muted);
  opacity: .7;
  border-top: 1px dashed rgba(255,255,255,.12);
  padding-top: 4px;
  margin-top: 1px;
  margin-bottom: 1px;
}

/* ── Engineering nodes: CIRCULAR ─────────────────────────── */
.eng-node {
  width: 46px;
  height: 46px;
  border-radius: 50%;            /* ← CIRCULAR */
  border: 2px solid rgba(255,255,255,.15);
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  z-index: 1;
  font-size: .6rem;
  font-weight: 700;
  transition: transform .15s, box-shadow .15s, filter .15s;
  cursor: default;
  flex-shrink: 0;
}

/* ── System colour fills (unmarked = translucent, marked = solid) */
:root {
  --col-red:       #ef4444;
  --col-green:     #22c55e;
  --col-yellow:    #eab308;
  --col-radiation: #a855f7;
}

.eng-node.red {
  background: rgba(239,68,68,.18);
  border-color: rgba(239,68,68,.40);
  --node-col: var(--col-red);
}
.eng-node.green {
  background: rgba(34,197,94,.18);
  border-color: rgba(34,197,94,.40);
  --node-col: var(--col-green);
}
.eng-node.yellow {
  background: rgba(234,179,8,.18);
  border-color: rgba(234,179,8,.40);
  --node-col: var(--col-yellow);
}
.eng-node.radiation {
  background: rgba(168,85,247,.18);
  border-color: rgba(168,85,247,.40);
  --node-col: var(--col-radiation);
}

/* Marked = solid fill */
.eng-node.marked {
  background: var(--node-col) !important;
  border-color: var(--node-col) !important;
  box-shadow: 0 0 8px var(--node-col);
}

/* ── Circuit ring outlines ────────────────────────────────── */
.eng-node.circuit-1 { outline: 2px solid rgba(249,115,22,.70); outline-offset: 2px; }
.eng-node.circuit-2 { outline: 2px solid rgba(6,182,212,.70);  outline-offset: 2px; }
.eng-node.circuit-3 { outline: 2px solid rgba(236,72,153,.70); outline-offset: 2px; }

/* ── Clickable glow ──────────────────────────────────────── */
.eng-node.clickable {
  cursor: pointer;
  box-shadow: 0 0 10px var(--node-col);
  animation: pulse-glow 1.4s infinite alternate;
}
@keyframes pulse-glow {
  from { box-shadow: 0 0 6px  var(--node-col); }
  to   { box-shadow: 0 0 16px var(--node-col); }
}
.eng-node.clickable:hover {
  transform: scale(1.12);
  filter: brightness(1.25);
}

/* ── Radiation symbol ────────────────────────────────────── */
.rad-sym {
  font-size: 1.1rem;
  opacity: .85;
  z-index: 1;
  position: relative;
}
.eng-node.marked .rad-sym { color: #fff; }

/* ── Circuit badge (C1/C2/C3 label) ─────────────────────── */
.circuit-badge {
  position: absolute;
  bottom: 1px;
  right: 2px;
  font-size: .42rem;
  font-weight: 900;
  letter-spacing: .02em;
  line-height: 1;
  opacity: .85;
  pointer-events: none;
}
.circuit-badge.c1 { color: #f97316; }
.circuit-badge.c2 { color: #06b6d4; }
.circuit-badge.c3 { color: #ec4899; }
.eng-node.marked .circuit-badge { color: #fff; opacity: .7; }

/* ── Damage flash ─────────────────────────────────────────── */
@keyframes damage-flash-anim {
  0%   { background: #ff3333 !important; box-shadow: 0 0 20px #ff0000; }
  100% { background: var(--node-col); }
}
.eng-node.damage-flash {
  animation: damage-flash-anim 0.9s ease-out !important;
}

/* ── Legend ──────────────────────────────────────────────── */
.legend {
  display: flex;
  flex-wrap: wrap;
  gap: .4rem 1rem;
  font-size: .72rem;
  color: var(--text-muted);
  padding: .5rem 1rem;
  justify-content: center;
}
.dot {
  display: inline-block;
  width: 10px; height: 10px;
  border-radius: 50%;
  vertical-align: middle;
  margin-right: 3px;
}
.dot.red       { background: var(--col-red); }
.dot.green     { background: var(--col-green); }
.dot.yellow    { background: var(--col-yellow); }
.dot.radiation { background: var(--col-radiation); }
