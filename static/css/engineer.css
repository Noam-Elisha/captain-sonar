/* ── Engineer styles ── */

.status-label {
  padding: .5rem 1rem;
  color: var(--accent);
  font-size: .85rem;
  font-style: italic;
}

/* ═══════════════════════════════════════════════════════════
   Engineering Board — Cross / Compass Layout
   8 cols × 8 rows: corners are dir-labels, arms are nodes,
   centre area spans 6×6 with compass decoration.
   ═══════════════════════════════════════════════════════════ */

.eng-board-wrap {
  display: flex;
  justify-content: center;
  padding: .75rem 1rem 1rem;
  overflow: auto;
}

/* 8×8 grid: col/row 1 = W-arm/N-arm, cols 2-7 = centre + N/S nodes, col 8 = E-arm */
.eng-cross {
  display: grid;
  grid-template-columns: 44px repeat(6, 40px) 44px;
  grid-template-rows:    44px repeat(6, 40px) 44px;
  gap: 4px;
  position: relative;
}

/* ── Direction corner labels ── */
.dir-corner {
  display: flex; align-items: center; justify-content: center;
  font-size: .7rem; font-weight: 800; letter-spacing: .1em;
  color: var(--text-muted);
  border-radius: 8px;
  padding: 2px;
  user-select: none;
}
/* Active direction corner gets a glow */
.dir-corner.active-arm {
  color: var(--team-primary, var(--accent));
}

/* ── Centre area ── */
.eng-center {
  grid-column: 2 / 8;
  grid-row:    2 / 8;
  background: var(--bg-input);
  border: 1px solid var(--border);
  border-radius: 12px;
  display: flex; flex-direction: column;
  align-items: center; justify-content: center;
  gap: .35rem;
  padding: .5rem;
}
.eng-center .compass-rose {
  font-size: 1.6rem;
  opacity: .6;
}
.eng-center .center-label {
  font-size: .7rem; color: var(--text-muted);
  letter-spacing: .1em; text-align: center;
}
.eng-center .center-status {
  font-size: .75rem; color: var(--accent);
  font-style: italic; text-align: center;
  min-height: 1.2em;
}
.eng-center .circuit-legend {
  display: flex; gap: .5rem; margin-top: .2rem;
}
.eng-center .circ-dot {
  width: 10px; height: 10px; border-radius: 2px;
}

/* ── Engineering nodes ── */
.eng-node {
  width: 40px; height: 40px;
  border-radius: 7px;
  border: 2px solid rgba(255,255,255,.08);
  background: var(--bg-input);
  cursor: default;
  display: flex; align-items: center; justify-content: center;
  font-size: .7rem; font-weight: 700;
  transition: all .18s;
  position: relative;
  user-select: none;
}

/* Unmarked node: translucent fill of the system colour */
.eng-node.yellow    { background: rgba(234,179, 8,.18); border-color: rgba(234,179, 8,.35); --node-color: var(--col-yellow); }
.eng-node.red       { background: rgba(239, 68,68,.18); border-color: rgba(239, 68,68,.35); --node-color: var(--col-red);    }
.eng-node.green     { background: rgba( 34,197,94,.18); border-color: rgba( 34,197,94,.35); --node-color: var(--col-green);  }
.eng-node.radiation { background: rgba(168, 85,247,.18); border-color: rgba(168,85,247,.35);--node-color: var(--col-radiation); font-size: .85rem; }

/* Circuit outline ring (overrides base border) */
.eng-node.circuit-1 { outline: 2px solid #f97316; outline-offset: 1px; }  /* orange */
.eng-node.circuit-2 { outline: 2px solid #06b6d4; outline-offset: 1px; }  /* cyan   */
.eng-node.circuit-3 { outline: 2px solid #ec4899; outline-offset: 1px; }  /* pink   */

/* Marked node: full system colour fill */
.eng-node.marked {
  background: var(--node-color) !important;
  border-color: var(--node-color) !important;
  color: rgba(0,0,0,.7);
  font-size: .9rem;
}
.eng-node.marked::after { content: '✕'; font-weight: 900; }

/* Clickable state */
.eng-node.clickable {
  cursor: pointer;
  box-shadow: 0 0 8px var(--node-color);
  transform: scale(1.05);
}
.eng-node.clickable:hover {
  background: var(--node-color) !important;
  color: rgba(0,0,0,.8);
  transform: scale(1.1);
}

/* Active arm highlight: nodes in the active direction */
.eng-node.active-arm {
  box-shadow: 0 0 6px rgba(14,165,233,.5);
  border-color: rgba(var(--team-primary-rgb, 37,99,235), .6);
}
.eng-node.active-arm.clickable {
  box-shadow: 0 0 12px var(--node-color), 0 0 4px rgba(14,165,233,.6);
}

/* ── Circuit label badge ── */
.circuit-badge {
  position: absolute; top: -5px; right: -5px;
  font-size: .5rem; font-weight: 800; letter-spacing: .04em;
  padding: 1px 3px; border-radius: 3px;
  line-height: 1;
}
.circuit-badge.c1 { background: #f97316; color: #fff; }
.circuit-badge.c2 { background: #06b6d4; color: #000; }
.circuit-badge.c3 { background: #ec4899; color: #fff; }

/* ── Damage flash on arm nodes ── */
@keyframes damageFlash {
  0%,100% { box-shadow: none; }
  30%,70% { box-shadow: 0 0 14px rgba(220,38,38,.9); border-color: var(--red) !important; }
}
.eng-node.damage-flash { animation: damageFlash .8s ease; }

/* ── Legend ── */
.legend {
  display: flex; gap: .9rem; align-items: center;
  padding: .4rem 1rem .6rem; flex-wrap: wrap;
  font-size: .73rem; color: var(--text-muted);
}
.legend .dot {
  display: inline-flex; align-items: center; justify-content: center;
  width: 14px; height: 14px; border-radius: 3px;
  margin-right: .25rem; vertical-align: middle;
}
.legend .dot.yellow    { background: var(--col-yellow); }
.legend .dot.red       { background: var(--col-red);    }
.legend .dot.green     { background: var(--col-green);  }
.legend .dot.radiation { background: var(--col-radiation); font-size: .65rem; }

.legend .circ-key {
  display: inline-flex; align-items: center; gap: .2rem; margin-right: .2rem;
}
.legend .circ-swatch {
  width: 10px; height: 10px; border-radius: 2px; display: inline-block;
}
